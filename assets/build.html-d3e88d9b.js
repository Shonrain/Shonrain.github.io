import{_ as i,r as d,o as c,c as l,d as a,e,a as r,b as n}from"./app-fcfb95bc.js";const t={},o=n(`<h1 id="打包和发布" tabindex="-1"><a class="header-anchor" href="#打包和发布" aria-hidden="true">#</a> 打包和发布</h1><p>在组件开发完成之后，我们需要打包并发布到私有服务器中。</p><h2 id="打包" tabindex="-1"><a class="header-anchor" href="#打包" aria-hidden="true">#</a> 打包</h2><p>打包很简单，在根目录下，执行如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> run build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>命令执行成功之后，<code>dist</code> 目录下会生成打包后的文件，接下来我们需要将打包后的文件在本地进行发布并测试。</p><h2 id="本地发布" tabindex="-1"><a class="header-anchor" href="#本地发布" aria-hidden="true">#</a> 本地发布</h2><p>打包后的文件不能直接发布到私有服务器中，需要在本地进行发布并测试，测试成功后走正常的组件发布流程（组件的发布权限应该被管控）。那么我们怎么通过本地进行发布并测试呢？</p><h3 id="verdaccio" tabindex="-1"><a class="header-anchor" href="#verdaccio" aria-hidden="true">#</a> Verdaccio</h3>`,9),p={href:"https://verdaccio.org/",target:"_blank",rel:"noopener noreferrer"},h=n(`<ol><li>安装</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> verdaccio
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>输入如下命令启动</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>verdaccio
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>启动成功之后，会在终端生成一个地址，一般为：<code>http://localhost:4873/</code>，这样我们就搭建了一个本地的 npm 私有仓库。</p><h3 id="注册-npm-的账号" tabindex="-1"><a class="header-anchor" href="#注册-npm-的账号" aria-hidden="true">#</a> 注册 npm 的账号</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> adduser <span class="token parameter variable">--registry</span>  http://localhost:4873
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>根据指引完成账号注册，注册成功之后，就可以将包发布到私有仓库了：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 设置镜像</span>
<span class="token function">npm</span> <span class="token builtin class-name">set</span> registry http://localhost:4873/

<span class="token comment"># 发布</span>
<span class="token function">pnpm</span> publish:local
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行成功之后，在浏览器中访问 <code>http://localhost:4873/</code> 就可以看到你刚刚上传的版本了。</p>`,10);function u(m,v){const s=d("ExternalLinkIcon");return c(),l("div",null,[o,a("p",null,[e("我们可以通过 "),a("a",p,[e("Verdaccio"),r(s)]),e(" 在本地搭建 npm 私有仓库。")]),h])}const g=i(t,[["render",u],["__file","build.html.vue"]]);export{g as default};
